# Java设计模式面试题

## 1. 设计模式概述

### 题目1：什么是设计模式？GoF的23种设计模式分类？

**答案：**
设计模式是在软件设计中常见问题的典型解决方案，是代码设计经验的总结。

**GoF 23种设计模式分类：**

**创建型模式（5种）：**
- 单例模式（Singleton）
- 工厂方法模式（Factory Method）
- 抽象工厂模式（Abstract Factory）
- 建造者模式（Builder）
- 原型模式（Prototype）

**结构型模式（7种）：**
- 适配器模式（Adapter）
- 装饰器模式（Decorator）
- 外观模式（Facade）
- 组合模式（Composite）
- 桥接模式（Bridge）
- 享元模式（Flyweight）
- 代理模式（Proxy）

**行为型模式（11种）：**
- 观察者模式（Observer）
- 策略模式（Strategy）
- 命令模式（Command）
- 状态模式（State）
- 责任链模式（Chain of Responsibility）
- 模板方法模式（Template Method）
- 访问者模式（Visitor）
- 中介者模式（Mediator）
- 备忘录模式（Memento）
- 迭代器模式（Iterator）
- 解释器模式（Interpreter）

## 2. 创建型模式

### 题目2：单例模式有哪些实现方式？各有什么优缺点？

**答案：**

1. **饿汉式**
   - 优点：线程安全，实现简单
   - 缺点：类加载时就创建，浪费内存

2. **懒汉式**
   - 优点：延迟创建，节省内存
   - 缺点：线程不安全（需要同步处理）

3. **双重检查锁定**
   - 优点：延迟创建，线程安全，性能好
   - 缺点：实现复杂

4. **静态内部类**
   - 优点：延迟创建，线程安全，性能好
   - 缺点：无

5. **枚举实现**
   - 优点：线程安全，防止反序列化
   - 缺点：不支持延迟创建

**代码示例见：** `SingletonPatternExample.java`

### 题目3：工厂模式的几种形式？

**答案：**

**简单工厂模式：**
- 一个工厂类负责创建所有产品
- 违反开闭原则

**工厂方法模式：**
- 每种产品对应一个工厂
- 符合开闭原则

**抽象工厂模式：**
- 创建一系列相关的产品族
- 适用于产品族的创建

**代码示例见：** `FactoryPatternExample.java`

### 题目4：建造者模式的应用场景？

**答案：**
**适用场景：**
- 构建复杂对象
- 构建过程需要多个步骤
- 同一构建过程可以创建不同表示

**优点：**
- 将构建和表示分离
- 可以精确控制构建过程
- 易于扩展

**代码示例见：** `BuilderPatternExample.java`

## 3. 结构型模式

### 题目5：适配器模式和装饰器模式的区别？

**答案：**

**适配器模式：**
- **目的**：解决接口不兼容问题
- **结构**：包装不兼容的类
- **使用场景**：第三方库集成、遗留代码改造

**装饰器模式：**
- **目的**：动态扩展对象功能
- **结构**：装饰器和被装饰对象实现相同接口
- **使用场景**：功能增强、IO流处理

### 题目6：代理模式的几种实现方式？

**答案：**

1. **静态代理**
   - 编译时确定代理关系
   - 代理类和目标类实现相同接口

2. **JDK动态代理**
   - 基于接口的代理
   - 使用Proxy和InvocationHandler

3. **CGLIB动态代理**
   - 基于继承的代理
   - 可以代理没有接口的类

**代码示例见：** `ProxyPatternExample.java`

## 4. 行为型模式

### 题目7：观察者模式的实现和应用？

**答案：**
**核心概念：**
- **主题（Subject）**：被观察的对象
- **观察者（Observer）**：监听主题变化的对象

**实现方式：**
1. 自定义实现
2. 使用Java内置Observable/Observer
3. 使用事件监听机制

**应用场景：**
- GUI事件处理
- MVC架构
- 消息队列

**代码示例见：** `ObserverPatternExample.java`

### 题目8：策略模式vs状态模式？

**答案：**

**策略模式：**
- **目的**：封装算法族，使它们可以互相替换
- **特点**：客户端选择策略
- **应用**：排序算法、支付方式选择

**状态模式：**
- **目的**：对象的行为随状态改变而改变
- **特点**：状态自动转换
- **应用**：状态机、游戏角色状态

### 题目9：模板方法模式的特点？

**答案：**
**定义：**
在抽象类中定义算法骨架，将某些步骤延迟到子类实现。

**特点：**
- 代码复用性好
- 控制子类扩展
- 符合开闭原则

**应用：**
- Spring框架中的JdbcTemplate
- Servlet中的service方法
- 算法框架设计

**代码示例见：** `TemplateMethodExample.java`

## 5. 设计原则

### 题目10：面向对象设计的SOLID原则？

**答案：**

**S - 单一职责原则（SRP）**
- 一个类只有一个引起变化的原因

**O - 开闭原则（OCP）**
- 对扩展开放，对修改关闭

**L - 里氏替换原则（LSP）**
- 子类可以替换父类

**I - 接口隔离原则（ISP）**
- 客户端不应该依赖不需要的接口

**D - 依赖倒置原则（DIP）**
- 依赖抽象而不是具体实现

### 题目11：如何选择合适的设计模式？

**答案：**
**选择原则：**
1. **明确问题**：确定要解决的具体问题
2. **分析需求**：考虑可扩展性、可维护性
3. **权衡利弊**：考虑复杂性和收益
4. **渐进式应用**：先简单实现，后重构

**常见应用场景：**
- **对象创建复杂** → 工厂模式、建造者模式
- **接口不兼容** → 适配器模式
- **功能扩展** → 装饰器模式
- **算法选择** → 策略模式
- **状态变化** → 状态模式
- **事件通知** → 观察者模式

## 6. 实际应用

### 题目12：Spring框架中使用了哪些设计模式？

**答案：**

**工厂模式：**
- BeanFactory创建Bean对象

**单例模式：**
- Bean的默认作用域

**代理模式：**
- AOP的实现机制

**模板方法模式：**
- JdbcTemplate、RestTemplate

**观察者模式：**
- ApplicationEvent事件机制

**适配器模式：**
- HandlerAdapter处理不同类型的Handler

**装饰器模式：**
- BeanWrapper包装Bean对象

### 题目13：如何在项目中应用设计模式？

**答案：**
**应用建议：**
1. **不要过度设计**：简单问题用简单方法
2. **渐进式重构**：随着需求变化逐步应用
3. **团队规范**：统一设计模式的使用标准
4. **文档说明**：记录使用的设计模式和原因

**最佳实践：**
- 优先使用组合而非继承
- 针对接口编程而非实现
- 封装变化点
- 降低耦合度

**代码示例见：** `DesignPatternsInPractice.java`